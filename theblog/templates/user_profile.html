{% extends 'base.html' %}
{% load bootstrap_icons %}

{% block content %}

<div class = 'container'>

	<!-- Profile Picture management -->

	<div class = 'row justify-content-center mt-5'>
		<div class="card shadow-sm col-md-8 col-sm-12 border-bottom px-5 pt-3">
			<img src="{{ profile.picture.url }}" class = "rounded-circle" width = "100" height="100">
			{% if profile.name %}
				<h3 class = 'py-4'> {{ profile.name }}
					<span>
						{% if request.user == user %}
							<a href="{% url 'edit-profile' profile.pk %}" style="color:#333">{% bs_icon 'brush' %}</a>
						{% endif %}
					</span>
				</h3>
			{% else %}
				<h3>{{ user.username }}
					{% if request.user == user %}
						<a href="{% url 'edit-profile' profile.pk %}" style="color:#333">Create Profile</a>
					{% endif %}
				</h3>
			{% endif %}

			{% if profile.birthday %}
			<h4 class = 'py-3'>Bithday: <u>{{ profile.birthday }}</u>
			{% endif %}

			{% if profile.location %}
			<h4 class="py-3" >Location: <u>{{ profile.location }}</u></h4>
			{% endif %}

			{% if profile.bio %}
			<h4 class="py-3">Bio: <u>{{ profile.bio }}</u></h4>
			{% endif %}

			<div class = 'mb-3'>
				<p>Followers: {{ num_followers }}</p>
				{% if request.user.is_authenticated %}
					{% if user != request.user %}
						{% if is_following == True %}
							<form method="POST" action = "{% url 'remove-follower' profile.pk %}">
								{% csrf_token %}
								<button class = 'btn btn-danger btn-sm'>Unfollow</button>
							</form>
							
						{% else %}
							<form method="POST" action = "{% url 'add-follower' profile.pk %}">
								{% csrf_token %}
								<button class = 'btn btn-success btn-sm'>Follow</button>
							</form>
						{% endif %}
					{% endif %}
				{% endif %}
			</div>

		</div>
	


	</div>

	{% for post in posts %}
	<div class = 'row justify-content-center mt-5'>
		<div class = 'col-md-8 col-sm-12 border-bottom'>
			<div class = 'postition-relative'>
				<a href="{% url 'article-detail' post.pk %}">{{ post.title }}</a>
				{% if request.user == post.author %}<a href="{% url 'update-article' post.pk %}">(Edit)</a>{% endif %}
			</div>
			<p><a style = 'text-decoration: none' class = 'text-primary' href="{% url 'profile' post.author.profile.pk %}">{{ post.author }} </a>{{ post.date_published }}</p>
		</div>
	</div> 
	{% endfor %}

</div>

{% endblock %}